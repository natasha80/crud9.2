(this.webpackJsonpra_router_crud=this.webpackJsonpra_router_crud||[]).push([[0],{18:function(e,t,a){e.exports=a(31)},23:function(e,t,a){},24:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),s=a.n(c),r=(a(23),a(24),a(6)),l=a(1),i=a(10),m=Object(n.createContext)([]);var u=function(e){var t=e.history,a=e.location,c=Object(n.useContext)(m).uploadToServer,s=a.post,r="";s&&(r=s.content);var l=Object(n.useState)(r),u=Object(i.a)(l,2),p=u[0],d=u[1];return o.a.createElement("div",{className:"input_wrapper"},o.a.createElement("span",{className:"close_btn",onClick:function(){s?t.goBack():t.push("/")}},"\u2716"),o.a.createElement("form",{className:"creation_form",onSubmit:function(e){e.preventDefault(),console.log(p),s?(c({id:s.id,content:p}),t.push("/")):(c({content:p}),t.push("/"))}},o.a.createElement("textarea",{onChange:function(e){var t=e.target.value;console.log(t),d(t)}},r),o.a.createElement("button",{type:"submit"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")))},p=a(9),d=a.n(p);var h=function(e){var t=e.match,a=e.history,c=Object(n.useContext)(m),s=c.posts,l=c.deleteFromServer,i=s.find((function(e){return e.id===t.params.id}));return o.a.createElement("div",{className:"post_view"},o.a.createElement("span",{className:"close_btn",onClick:function(){a.push("/")}},"\u2716"),o.a.createElement("p",{className:"post_date"},"\u0414\u0430\u0442\u0430: ",d()(i.created).format("DD.MM.YYYY HH:mm:ss")),o.a.createElement("p",{className:"post_text"},i.content),o.a.createElement("div",{className:"post_interface"},o.a.createElement("span",{className:"del_btn",onClick:function(){l(i.id),a.push("/")}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),o.a.createElement("span",{className:"redact_btn"},o.a.createElement(r.b,{className:"post_link",to:{pathname:"/posts/new",post:i}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"))))};var f=function(e){var t=e.data;return o.a.createElement("div",{className:"post"},o.a.createElement(r.b,{className:"post_link",to:"/posts/".concat(t.id)},o.a.createElement("p",{className:"post_date"},"\u0414\u0430\u0442\u0430: ",d()(t.created).format("DD.MM.YYYY HH:mm:ss")),o.a.createElement("p",{className:"post_text"},t.content)))},E=function(){var e=Object(n.useContext)(m).posts;return o.a.createElement("div",{className:"posts_list"},e.map((function(e){return o.a.createElement(f,{data:e,key:e.id})})))};var v=function(){return o.a.createElement("div",{className:"main_page"},o.a.createElement("span",{className:"add_btn"},o.a.createElement(r.b,{className:"post_link",to:"/posts/new"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")),o.a.createElement(E,null))};function b(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],r=function(){fetch("http://localhost:7777/posts").then((function(e){return e.json()})).then((function(e){s(e)}))};Object(n.useEffect)(r,[]);return o.a.createElement(m.Provider,{value:{posts:c,uploadToServer:function(e){var t=e.id,a=void 0===t?0:t,n=e.content;fetch("http://localhost:7777/posts",{headers:{"Content-Type":"application/json;charset=utf-8"},method:"POST",body:JSON.stringify({id:a,content:n})}).then(r)},deleteFromServer:function(e){fetch("http://localhost:7777/posts/".concat(e),{method:"DELETE"}).then(r)}}},e.children)}var _=function(){return o.a.createElement(b,null,o.a.createElement("div",{className:"App"},o.a.createElement(r.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/posts/new",component:u}),o.a.createElement(l.a,{path:"/posts/:id",component:h}),o.a.createElement(l.a,{path:"/",exact:!0,component:v})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.ae49bc9a.chunk.js.map